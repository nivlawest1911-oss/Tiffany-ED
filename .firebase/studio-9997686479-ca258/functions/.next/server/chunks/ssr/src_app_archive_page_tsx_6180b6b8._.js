module.exports=[711171,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(179597);a.i(69387);var e=a.i(60574),f=a.i(932596),g=a.i(346271),h=a.i(781560),i=a.i(284505),j=a.i(170106);let k=(0,j.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),l=(0,j.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var m=a.i(541785),n=a.i(50944),o=a.i(886723),p=a.i(774290),q=a.i(801703),r=a.i(414800),s=a.i(991128),t=c,u=a.i(965802);function v(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}class w extends t.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent){let a=b.offsetParent,c=(0,s.isHTMLElement)(a)&&a.offsetWidth||0,d=this.props.sizeRef.current;d.height=b.offsetHeight||0,d.width=b.offsetWidth||0,d.top=b.offsetTop,d.left=b.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function x({children:a,isPresent:d,anchorX:e,root:f}){let g=(0,t.useId)(),h=(0,t.useRef)(null),i=(0,t.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:j}=(0,t.useContext)(u.MotionConfigContext),k=function(...a){return c.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=v(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():v(a[b],null)}}}}(...a),a)}(h,a?.ref);return(0,t.useInsertionEffect)(()=>{let{width:a,height:b,top:c,left:k,right:l}=i.current;if(d||!h.current||!a||!b)return;let m="left"===e?`left: ${k}`:`right: ${l}`;h.current.dataset.motionPopId=g;let n=document.createElement("style");j&&(n.nonce=j);let o=f??document.head;return o.appendChild(n),n.sheet&&n.sheet.insertRule(`
          [data-motion-pop-id="${g}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${b}px !important;
            ${m}px !important;
            top: ${c}px !important;
          }
        `),()=>{o.contains(n)&&o.removeChild(n)}},[d]),(0,b.jsx)(w,{isPresent:d,childRef:h,sizeRef:i,children:t.cloneElement(a,{ref:k})})}let y=({children:a,initial:d,isPresent:e,onExitComplete:f,custom:g,presenceAffectsLayout:h,mode:i,anchorX:j,root:k})=>{let l=(0,p.useConstant)(z),m=(0,c.useId)(),n=!0,o=(0,c.useMemo)(()=>(n=!1,{id:m,initial:d,isPresent:e,custom:g,onExitComplete:a=>{for(let b of(l.set(a,!0),l.values()))if(!b)return;f&&f()},register:a=>(l.set(a,!1),()=>l.delete(a))}),[e,l,f]);return h&&n&&(o={...o}),(0,c.useMemo)(()=>{l.forEach((a,b)=>l.set(b,!1))},[e]),c.useEffect(()=>{e||l.size||!f||f()},[e]),"popLayout"===i&&(a=(0,b.jsx)(x,{isPresent:e,anchorX:j,root:k,children:a})),(0,b.jsx)(r.PresenceContext.Provider,{value:o,children:a})};function z(){return new Map}var A=a.i(120410);let B=a=>a.key||"";function C(a){let b=[];return c.Children.forEach(a,a=>{(0,c.isValidElement)(a)&&b.push(a)}),b}let D=({children:a,custom:d,initial:e=!0,onExitComplete:f,presenceAffectsLayout:g=!0,mode:h="sync",propagate:i=!1,anchorX:j="left",root:k})=>{let[l,m]=(0,A.usePresence)(i),n=(0,c.useMemo)(()=>C(a),[a]),r=i&&!l?[]:n.map(B),s=(0,c.useRef)(!0),t=(0,c.useRef)(n),u=(0,p.useConstant)(()=>new Map),[v,w]=(0,c.useState)(n),[x,z]=(0,c.useState)(n);(0,q.useIsomorphicLayoutEffect)(()=>{s.current=!1,t.current=n;for(let a=0;a<x.length;a++){let b=B(x[a]);r.includes(b)?u.delete(b):!0!==u.get(b)&&u.set(b,!1)}},[x,r.length,r.join("-")]);let D=[];if(n!==v){let a=[...n];for(let b=0;b<x.length;b++){let c=x[b],d=B(c);r.includes(d)||(a.splice(b,0,c),D.push(c))}return"wait"===h&&D.length&&(a=D),z(C(a)),w(n),null}let{forceRender:E}=(0,c.useContext)(o.LayoutGroupContext);return(0,b.jsx)(b.Fragment,{children:x.map(a=>{let c=B(a),o=(!i||!!l)&&(n===x||r.includes(c));return(0,b.jsx)(y,{isPresent:o,initial:(!s.current||!!e)&&void 0,custom:d,presenceAffectsLayout:g,mode:h,root:k,onExitComplete:o?void 0:()=>{if(!u.has(c))return;u.set(c,!0);let a=!0;u.forEach(b=>{b||(a=!1)}),a&&(E?.(),z(t.current),i&&m?.(),f&&f())},anchorX:j,children:a},c)})})};function E(){let a=(0,n.useSearchParams)(),[d,e]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{if(a.get("session_id")){e(!0);let a=setTimeout(()=>e(!1),1e4);return()=>clearTimeout(a)}},[a]),d)?(0,b.jsx)(D,{children:(0,b.jsxs)(g.motion.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{x:100,opacity:0},className:"fixed top-5 right-5 z-[100] bg-gradient-to-br from-emerald-500 to-green-700 text-white p-4 pr-6 rounded-2xl shadow-xl shadow-emerald-900/20 border border-white/20 flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-2xl",children:"⚡"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-bold text-sm",children:"Professional Tier Active"}),(0,b.jsx)("div",{className:"text-[10px] opacity-90 font-mono tracking-tight uppercase",children:"Global Strategic Suite Enabled"})]})]})}):null}let F={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},G={hidden:{opacity:0,scale:.95},show:{opacity:1,scale:1}};function H(){let[a,j]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(""),t=async()=>{let a=(0,e.query)((0,e.collection)(d.firestore,"strategicAudits"),(0,e.orderBy)("timestamp","desc"));j((await (0,e.getDocs)(a)).docs.map(a=>({id:a.id,...a.data()}))),o(!1)};(0,c.useEffect)(()=>{t()},[]);let u=async()=>{if(!confirm("⚠️ CRITICAL: Are you sure you want to permanently delete all archived audits? This cannot be undone."))return;o(!0);let a=(0,e.query)((0,e.collection)(d.firestore,"strategicAudits")),b=await (0,e.getDocs)(a),c=(0,e.writeBatch)(d.firestore);b.docs.forEach(a=>{c.delete(a.ref)}),await c.commit(),alert("Strategic Vault Reset Successfully."),t()},v=async a=>{let b=(0,e.doc)(d.firestore,"strategicAudits",a);await (0,e.updateDoc)(b,{executiveCorrection:r,lastRefined:new Date}),q(null),t()};return(0,b.jsxs)(m.default,{children:[(0,b.jsx)(c.Suspense,{fallback:null,children:(0,b.jsx)(E,{})}),(0,b.jsx)("div",{className:"min-h-screen bg-zinc-50 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-50 p-8 md:p-12 transition-colors duration-500",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl md:text-4xl font-black tracking-tight uppercase",children:[(0,b.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-amber-500 to-orange-600",children:"Executive"})," Strategic Archive"]}),d.auth.currentUser?.displayName&&(0,b.jsxs)("p",{className:"text-zinc-500 dark:text-zinc-400 font-medium mt-1",children:["Welcome, ",d.auth.currentUser.displayName]})]}),(0,b.jsxs)("button",{onClick:u,className:"px-4 py-2 bg-red-500/10 text-red-600 dark:text-red-400 border border-red-500/20 rounded-lg text-xs font-bold uppercase tracking-widest hover:bg-red-500/20 transition-colors flex items-center gap-2",children:[(0,b.jsx)(h.Trash2,{size:14})," Reset Vault"]})]}),(0,b.jsx)("div",{className:"h-px bg-zinc-200 dark:bg-zinc-800"}),n?(0,b.jsxs)("div",{className:"flex items-center justify-center py-20",children:[(0,b.jsx)("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),(0,b.jsx)("span",{className:"ml-3 text-sm font-bold text-zinc-400 uppercase tracking-widest",children:"Decrypting Records..."})]}):(0,b.jsxs)(g.motion.div,{variants:F,initial:"hidden",animate:"show",className:"space-y-6",children:[a.map(a=>(0,b.jsxs)(g.motion.div,{variants:G,className:"group relative p-6 bg-white dark:bg-zinc-900 rounded-2xl border border-zinc-200 dark:border-zinc-800 shadow-sm hover:shadow-xl hover:border-amber-500/30 transition-all duration-300",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-amber-500/80 bg-amber-500/10 px-2 py-1 rounded-full",children:a.targetSchool||"District Office"}),(0,b.jsx)("span",{className:"ml-3 text-xs text-zinc-400 font-mono",children:a.timestamp?.toDate().toLocaleString()})]}),(0,b.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsx)("button",{onClick:()=>{let b,c;return(b=new f.jsPDF).setFontSize(20),b.text("EdIntel Strategic Memo",20,20),c=b.splitTextToSize(a.strategicOutput,170),void(b.text(c,20,50),b.save("Audit_Export.pdf"))},className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg text-zinc-500 transition-colors",children:(0,b.jsx)(i.Download,{size:16})}),(0,b.jsx)("button",{onClick:()=>{q(a.id),s(a.executiveCorrection||"")},className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg text-zinc-500 transition-colors",children:(0,b.jsx)(k,{size:16})})]})]}),(0,b.jsx)("h3",{className:"text-lg font-bold mb-2 text-zinc-800 dark:text-zinc-200",children:a.executivePrompt}),(0,b.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 leading-relaxed mb-4",children:a.strategicOutput}),p===a.id&&(0,b.jsxs)(g.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-800",children:[(0,b.jsx)("textarea",{className:"w-full p-3 text-sm bg-zinc-50 dark:bg-black border border-zinc-200 dark:border-zinc-800 rounded-xl focus:ring-2 focus:ring-amber-500 outline-none transition-all",rows:3,placeholder:"Enter executive notes...",value:r,onChange:a=>s(a.target.value)}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,b.jsx)("button",{onClick:()=>q(null),className:"px-3 py-1.5 text-xs font-bold text-zinc-500 hover:text-zinc-900",children:"Cancel"}),(0,b.jsxs)("button",{onClick:()=>v(a.id),className:"px-3 py-1.5 bg-amber-500 text-white rounded-lg text-xs font-bold flex items-center gap-1 hover:bg-amber-600 transition-colors",children:[(0,b.jsx)(l,{size:12})," Save"]})]})]})]},a.id)),0===a.length&&(0,b.jsx)("div",{className:"text-center py-20 text-zinc-400",children:(0,b.jsx)("p",{children:"No strategic records found in the vault."})})]})]})})]})}a.s(["default",()=>H],711171)}];

//# sourceMappingURL=src_app_archive_page_tsx_6180b6b8._.js.map